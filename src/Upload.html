<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Upload</title>
    <link href="../css/Upload.css" rel="stylesheet" type="text/css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=2.0, user-scalable=yes" />
</head>
<header>
    <h3>
        <nav>
            <a href="Home.html">Home</a>
            <a href="Browser.html">Browse</a>
            <a href="Search.html">Search</a>
            <div class="menu">
                <span>My account</span>
                <div class="menu_item">
                    <img src="../images/upload.png" height="18px" width="18px"><a href="Upload.html" id="highlight">Upload</a><br>
                    <img src="../images/my_photo.png" height="18px" width="18px"><a href="my_photo.html">My_photo</a><br>
                    <img src="../images/favor.png" height="18px" width="18px"><a href="favor.html">Favor</a><br>
                    <img src="../images/login.png" height="18px" width="18px"><a href="../Index.html">Login</a><br>
                </div>
            </div>
        </nav>
    </h3>
</header>
<body>
    <div id="content">
        <div><h4>Upload</h4></div>
        <div id="picture">
            <input type="file" id="file">
            <input type="submit" id="btn" value="Upload">
            <div id="result"></div>
        </div>
        <div id="txt">
            <p>图片标题：</p>
            <input type="textarea">
            <p>图片描述：</p>
            <textarea rows="15"></textarea>
            <p>拍摄国家：</p>
            <input type="textarea">
            <p>拍摄城市：</p>
            <input type="textarea">
        </div>
        <button onclick="alert('已提交')"><a href="my_photo.html">Submit</a></button>
    </div>
 




<script>
    var oFlie = document.getElementById("file");
    var oBtn = document.getElementById("btn");
    var oRes = document.getElementById("result");
    var oImg = document.getElementsByTagName("img");
    var onOff = true;
    oBtn.onclick = function(){
        var oType = oFlie.files[0].type;
        var fs = oFlie.files[0];
        var pattern = /^(image)\/\w+/;
        if(!pattern.test(oType)){
            oRes.innerHTML = "不可以上传";
        }
        var reader = new FileReader();
        reader.readAsDataURL(fs);
        reader.onload = function(){
            if(onOff){
                var oNode = document.createElement("img");
                oNode.src = this.result;
                oRes.appendChild(oNode);
            }else {
                alert("请勿重复提交");
            }
            for (var i=0;i<oImg.length;i++) {
                if(oImg[i].src==this.result){
                    onOff = false;
                }
            }
        }
    }
</script>
</body>
<footer>
    <p>联系方式：18017529810 备案号：19302010024Copyright © Webfundamental All rights reserved</p>
</footer>
</html>